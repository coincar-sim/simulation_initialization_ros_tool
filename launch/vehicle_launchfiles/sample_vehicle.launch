<launch>

    <!-- arguments that are passed from the top launchfile -->
    <arg name="vehicle_id" />
    <arg name="vehicle_ns" />

    <arg name="objects_ground_truth_topic_with_ns" />
    <arg name="desired_motion_topic_with_ns" />
    <arg name="global_communication_ns" />
    <arg name="perc_pred_obj_topic" />
    <arg name="perc_egomotion_topic" />
    <arg name="pred_plan_obj_topic" />
    <arg name="internal_communication_subns" />
    <arg name="BSM_topic" />
    <arg name="lanelet_map_filename" />

    <!-- vehicle initialization arguments -->
    <arg name="object_initialization_topic_with_ns" />
    <arg name="trajectory_file" />
    <arg name="initial_v" />
    <arg name="hull_file" />

    <!-- planning specific arguments -->
    <arg name="v_desired" value="3.0" />
    <arg name="const_offset" value="2.0" />

    <!-- launch initialization -->
    <node pkg="simulation_management_ros_tool" type="object_initialization.py" name="object_initialization" output="screen" ns="init">
        <param name="object_id" value="$(arg vehicle_id)" />
        <param name="trajectory_file" value="$(arg trajectory_file)" />
        <param name="initial_v" value="$(arg initial_v)" />
        <param name="hull_file" value="$(arg hull_file)" />
      <param name="object_initialization_topic" value="$(arg object_initialization_topic_with_ns)" />
    </node>

    <!-- launch perception -->
    <include file="$(find sim_sample_perception_ros_tool)/launch/sample_perception.launch" ns="perception" >
        <arg name="vehicle_id" value="$(arg vehicle_id)" />
        <arg name="vehicle_ns" value="$(arg vehicle_ns)" />

        <arg name="objects_ground_truth_topic_with_ns" value="$(arg objects_ground_truth_topic_with_ns)" />
        <arg name="perc_pred_obj_topic" value="$(arg perc_pred_obj_topic)" />
        <arg name="perc_egomotion_topic" value="$(arg perc_egomotion_topic)" />
        <arg name="internal_communication_subns" value="$(arg internal_communication_subns)" />
        <arg name="BSM_topic" value="$(arg BSM_topic)" />
    </include>

    <!-- launch prediction -->
    <include file="$(find sim_sample_prediction_ros_tool)/launch/sample_prediction.launch" ns="prediction" >
        <arg name="vehicle_id" value="$(arg vehicle_id)" />
        <arg name="vehicle_ns" value="$(arg vehicle_ns)" />

        <arg name="objects_ground_truth_topic_with_ns" value="$(arg objects_ground_truth_topic_with_ns)" />
        <arg name="desired_motion_topic_with_ns" value="$(arg desired_motion_topic_with_ns)" />
        <arg name="perc_pred_obj_topic" value="$(arg perc_pred_obj_topic)" />
        <arg name="perc_egomotion_topic" value="$(arg perc_egomotion_topic)" />
        <arg name="pred_plan_obj_topic" value="$(arg pred_plan_obj_topic)" />
        <arg name="internal_communication_subns" value="$(arg internal_communication_subns)" />

        <arg name="lanelet_map_filename" value="$(arg lanelet_map_filename)" />
    </include>


    <!-- launch planning -->
    <include file="$(find sim_sample_planning_ros_tool)/launch/sample_planning.launch" ns="planning" >
        <arg name="vehicle_id" value="$(arg vehicle_id)" />
        <arg name="vehicle_ns" value="$(arg vehicle_ns)" />

        <arg name="objects_ground_truth_topic_with_ns" value="$(arg objects_ground_truth_topic_with_ns)" />
        <arg name="desired_motion_topic_with_ns" value="$(arg desired_motion_topic_with_ns)" />
        <arg name="perc_egomotion_topic" value="$(arg perc_egomotion_topic)" />
        <arg name="pred_plan_obj_topic" value="$(arg pred_plan_obj_topic)" />
        <arg name="internal_communication_subns" value="$(arg internal_communication_subns)" />

        <arg name="lanelet_map_filename" value="$(arg lanelet_map_filename)" />

        <arg name="v_desired" value="$(arg v_desired)" />
        <arg name="const_offset" value="$(arg const_offset)" />
    </include>


    <!-- launch communication -->
    <include file="$(find sim_sample_communication_ros_tool)/launch/sample_communication.launch" ns="$(arg internal_communication_subns)" >
        <arg name="vehicle_id" value="$(arg vehicle_id)" />
        <arg name="vehicle_ns" value="$(arg vehicle_ns)" />

        <arg name="objects_ground_truth_topic_with_ns" value="$(arg objects_ground_truth_topic_with_ns)" />
        <arg name="global_communication_ns" value="$(arg global_communication_ns)" />
        <arg name="internal_communication_subns" value="$(arg internal_communication_subns)" />

        <arg name="car2x_topic1" value="$(arg BSM_topic)" />
    </include>

</launch>
